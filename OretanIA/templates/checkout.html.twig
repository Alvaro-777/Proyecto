{% extends 'base.html.twig' %}

{% block head %}
    <link rel="stylesheet" href="{{ asset('css/checkout.css') }}">
{% endblock %}

{% block title %}Confirmar Compra{% endblock %}

{% block body %}

    <h1 class="checkout-titulo">Confirmar tu compra</h1>

    <section class="checkout-container">

        <div class="checkout-resumen">
            <h2>Resumen del pedido</h2>

            <p><strong>Plan:</strong>
                {% if planId == 1 %}
                    Básico
                {% elseif planId == 2 %}
                    Pro (+200 bonus)
                {% else %}
                    Premium (+500 bonus)
                {% endif %}
            </p>

            <p><strong>Créditos:</strong> {{ plan.creditos }}</p>
            <p><strong>Precio:</strong> {{ plan.precio | number_format(2, '.') }} €</p>

            {% if aplicaDescuento %}
                <p class="descuento">
                    ¡10% de descuento en tu primera compra!
                </p>
            {% endif %}

            <p class="total">
                Total a pagar: <span>{{ precioFinal }} €</span>
            </p>
        </div>

        <div class="checkout-pago">
            <h3>Método de pago</h3>

            <form method="post">
                <label for="tarjeta">Número de tarjeta</label>
                <input type="text" id="tarjeta" name="tarjeta" placeholder="1234 5678 9012 3456" required>

                <label for="fecha">Fecha de expiración</label>
                <input type="text" id="fecha" name="fecha" placeholder="MM/AA" required>

                <label for="cvv">CVV</label>
                <input type="text" id="cvv" name="cvv" placeholder="123" required>

                <button type="submit" class="btn-confirmar">
                    Confirmar pago
                </button>

                <a class="volver" href="{{ path('pago_planes') }}">
                    Volver a planes
                </a>
            </form>
        </div>

    </section>

    <section class="checkout-info">
        <p>
            El pago es totalmente seguro y los créditos se añadirán automáticamente a tu cuenta
            tras la confirmación. No almacenamos datos de tarjetas ni información sensible.
            <br><br>
            Los créditos no caducan y pueden utilizarse en cualquiera de los servicios de Oretan-IA.
            Para cualquier duda, puedes contactar con nuestro soporte desde tu perfil.
        </p>
    </section>

    <script src="{{ asset('script/validacion-tarjeta.js') }}"></script>

{% endblock %}
